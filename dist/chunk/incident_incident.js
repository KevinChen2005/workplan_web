(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"11":function(e,t,a){e.exports=a(0)(18)},"12":function(e,t,a){"use strict";e.exports.locality_address="https://xyx-mainland-api.raink.com.cn"},"19":function(e,t,a){},"20":function(e,t,a){},"9":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var n=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),i=a(1),l=_interopRequireDefault(i),d=_interopRequireDefault(a(2)),o=a(11),c=a(13);a(19);var s=_interopRequireDefault(a(12));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}a(20);var r=function(e){function Incident(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Incident);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Incident.__proto__||Object.getPrototypeOf(Incident)).apply(this,arguments));return e.config={"navigationBarTitleText":"任务详情"},e.state={"taskdetall":{"task":{"id":"","username":"","openid":"","title":"","content":"","date":"","length_time":"","complete_time":"","speed":"","state":"","create_time":""},"smalltask":[{"title":"","content":[],"icon":""}]},"taskid":"","showaddincidentmodel":!1,"addincidentvalue":[],"addincidentvalueitem":"","systemheight":"","islogin":!1},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Incident,i.Component),n(Incident,[{"key":"componentWillMount","value":function componentWillMount(){var e=this;""!==l.default.getStorageSync("phone")?(this.setState({"islogin":!1}),this.setState({"taskid":this.$router.params.taskid}),l.default.request({"url":s.default.locality_address+"/v1/work/get-smalltask","data":{"phone":l.default.getStorageSync("phone"),"scene":"web","taskid":this.$router.params.taskid}}).then(function(t){200==t.data.code?e.setState({"taskdetall":t.data.result}):l.default.showToast({"title":"参数错误!","icon":"none"})}).catch(function(e){l.default.showToast({"title":"网络错误!","icon":"none"})}),this.setState({"locktaskstate":l.default.getStorageSync("locktaskstate")})):this.setState({"islogin":!0})}},{"key":"componentDidMount","value":function componentDidMount(){}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"componentDidShow","value":function componentDidShow(){}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"render","value":function render(){var e=this.state.addincidentvalue.map(function(e){return d.default.createElement(c.AtTag,{"size":"normal","className":"includetap","type":"primary"},e)});return d.default.createElement(o.View,{"className":"index"},d.default.createElement(o.View,null,d.default.createElement(o.View,{"className":"backplus"},d.default.createElement(o.Image,{"src":"https://cdn-xyx.raink.com.cn/elsfkxxk/201901051546668599.png","style":"height: 57px;width: 145px;margin: 5px  0 0 25px;"}),d.default.createElement(c.AtButton,{"size":"small","circle":!0,"type":"secondary","className":"back","onClick":this.back.bind(this)},"返回"))),d.default.createElement(o.View,{"className":"at-article"},d.default.createElement(o.View,{"className":"at-article__h1"},this.state.taskdetall.task.title),d.default.createElement(o.View,{"className":"at-article__info"},this.state.taskdetall.task.create_time,"创建"),d.default.createElement(o.View,{"className":"at-article__content"},d.default.createElement(o.View,{"className":"at-article__section"},d.default.createElement(o.View,{"className":"at-article__p"},d.default.createElement(o.View,{"className":"scrollview"},d.default.createElement(o.View,{"className":""},this.state.taskdetall.task.content)))))),d.default.createElement(c.AtDivider,{"content":"事件","fontColor":"#2d8cf0","lineColor":"#2d8cf0"}),d.default.createElement(o.View,{"className":"scrollview"},d.default.createElement(o.View,{"className":"timeline"},d.default.createElement(c.AtTimeline,{"pending":!0,"items":this.state.taskdetall.smalltask}))),d.default.createElement(o.View,{"className":"addbutton","onClick":this.addincident.bind(this)},d.default.createElement(c.AtTag,{"size":"normal","type":"primary","active":!0},d.default.createElement(c.AtIcon,{"value":"add","size":"20","color":"rgb(255,255,255)"}))),d.default.createElement(c.AtModal,{"isOpened":this.state.islogin,"closeOnClickOverlay":!1},d.default.createElement(c.AtModalHeader,null,"提示"),d.default.createElement(c.AtModalContent,null,d.default.createElement(o.View,{"className":"delmode"},d.default.createElement(o.Text,null,"您还没有登录,点击确定前往首页登录"))),d.default.createElement(c.AtModalAction,null,d.default.createElement(o.Button,{"style":"color:#6190E8","onClick":this.gotoindex.bind(this,1,"点击了确定")},"确定"))),d.default.createElement(c.AtModal,{"isOpened":this.state.showaddincidentmodel,"closeOnClickOverlay":!1,"onClose":this.closeModal.bind(this,1,"Modal被关闭了")},d.default.createElement(c.AtModalHeader,null,"添加事件"),d.default.createElement(c.AtModalContent,null,d.default.createElement(o.View,{"className":"addincident"},d.default.createElement(o.View,{"className":"inputincidenttap"},e),d.default.createElement(c.AtDivider,{"className":"dividerheight","fontColor":"#2d8cf0","lineColor":"#2d8cf0"}),d.default.createElement(o.View,{"className":"inputincident"},d.default.createElement(c.AtInput,{"name":"value1","type":"text","placeholder":"事件","value":this.state.addincidentvalueitem,"onChange":this.handleChange.bind(this),"customStyle":"border:1px solid  #d6e4ef;padding:15rpx 0;border-radius:8rpx;","maxLength":10}),d.default.createElement(c.AtTag,{"size":"small","type":"primary","onClick":this.addtag.bind(this),"active":!0},d.default.createElement(c.AtIcon,{"value":"add","size":"10","color":"rgb(255,255,255)"}))))),d.default.createElement(c.AtModalAction,null,d.default.createElement(o.Button,{"onClick":this.closeModal.bind(this,1,"点击了取消")},"取消"),d.default.createElement(o.Button,{"style":"color:#6190E8","onClick":this.AddIncident.bind(this,1,"点击了确定")},"确定"))))}},{"key":"back","value":function back(){l.default.navigateBack()}},{"key":"gotoindex","value":function gotoindex(){l.default.navigateTo({"url":"/pages/index/index"})}},{"key":"addincident","value":function addincident(e){this.setState({"showaddincidentmodel":!0})}},{"key":"closeModal","value":function closeModal(){this.setState({"showaddincidentmodel":!1,"addincidentvalue":[],"addincidentvalueitem":""})}},{"key":"handleChange","value":function handleChange(e){this.setState({"addincidentvalueitem":e})}},{"key":"addtag","value":function addtag(e){if(""!=this.state.addincidentvalueitem){var t=this.state.addincidentvalue;t.push(this.state.addincidentvalueitem),this.setState({"addincidentvalue":t,"addincidentvalueitem":""})}else l.default.showToast({"title":"事件不能为空","icon":"none"})}},{"key":"AddIncident","value":function AddIncident(e){var t=this;if(0!=this.state.addincidentvalue.length){var a="";l.default.showLoading({"title":"请稍候..."});for(var n=0;n<this.state.addincidentvalue.length;n++)n<this.state.addincidentvalue.length-1?a+=this.state.addincidentvalue[n]+"@@":a+=this.state.addincidentvalue[n];l.default.request({"url":s.default.locality_address+"/v1/work/smalltask","method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"},"data":{"phone":l.default.getStorageSync("phone"),"scene":"web","taskid":this.state.taskid,"content":a}}).then(function(e){200==e.data.code?(t.setState({"taskdetall":e.data.result}),t.setState({"showaddincidentmodel":!1,"addincidentvalue":[],"addincidentvalueitem":""})):l.default.showToast({"title":"网络出错","icon":"none"}),l.default.hideLoading()}).catch(function(e){l.default.hideLoading(),t.setState({"showaddincidentmodel":!1,"addincidentvalue":[],"addincidentvalueitem":""}),l.default.showToast({"title":"网络出错","icon":"none"})})}else l.default.showToast({"title":"不能添加空事件","icon":"none"})}}]),Incident}();t.default=r}}]);