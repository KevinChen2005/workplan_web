(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"11":function(e,t,a){e.exports=a(0)(18)},"12":function(e,t,a){"use strict";e.exports.locality_address="https://xyx-mainland-api.raink.com.cn"},"17":function(e,t,a){},"7":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{"value":!0}),t.default=void 0;var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n=function(){function defineProperties(e,t){for(var a=0;a<t.length;a++){var l=t[a];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(e,l.key,l)}}return function(e,t,a){return t&&defineProperties(e.prototype,t),a&&defineProperties(e,a),e}}(),o=a(1),i=_interopRequireDefault(o),s=_interopRequireDefault(a(2)),r=a(11),d=a(13),c=_interopRequireDefault(a(16));a(17);var u=_interopRequireDefault(a(12));function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}var m=50,f=function(e){function Index(){!function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Index);var e=function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(Index.__proto__||Object.getPrototypeOf(Index)).apply(this,arguments));return e.config={"navigationBarTitleText":"工作日志"},e.onDateChange=function(t){e.setState({"dateSel":t.detail.value}),console.log(t),i.default.request({"url":u.default.locality_address+"/v1/work/modify","data":{"wid":t.currentTarget.id,"phone":i.default.getStorageSync("phone"),"scene":"web","field":"length_time","val":t.detail.value},"method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){switch(e.state.current){case 0:for(var a=e.state.twodayago_data,l=0;l<a.length;l++)a[l].id==t.data.result.wid&&(a[l][t.data.result.field]=t.data.result.val);break;case 1:for(var n=e.state.onedayago_data,o=0;o<n.length;o++)n[o].id==t.data.result.wid&&(n[o][t.data.result.field]=t.data.result.val);break;case 2:for(var i=e.state.today_data,s=0;s<i.length;s++)i[s].id==t.data.result.wid&&(i[s][t.data.result.field]=t.data.result.val)}e.setState({"showmodel":!1,"targhtid":[],"modeldatatitle":"标题","value":""})})},e.closeModal=function(t,a){console.log(a),e.setState({"showmodel":!1,"targhtid":[],"modeldatatitle":"标题","value":"","showrankmodel":!1,"ischangetime":!1})},e.state={"userinfo":{"type":"userAvatarUrl"},"currenttime":"","register":{"msg":"error","state":!1},"username":"","phone":"","current":2,"currentdate":0,"current_today":"","onedayago":"","twodayago":"","today_data":[],"onedayago_data":[],"twodayago_data":[],"today_ext":{"id":"1","daily_sum":""},"onedayago_ext":{"id":"1","daily_sum":""},"twodayago_ext":{"id":"1","daily_sum":""},"categorys":["开拓","驱动","实施","维护","协同"],"itemtitles":["时长(分)","类别","工作项目","工作内容及说明","效率自评","对应目标","驱动自评"],"moment":["9:00","9:30","10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:00","16:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00"],"showmodel":!1,"modeldatatitle":"标题","value":"","idMname":{"work_start_time":"开始时间","length_time":"时长(分)","category":"类别","work_project":"工作项目","work_content":"工作内容及说明","work_efficiency":"效率自评","work_effect":"对应目标","work_myself":"驱动自评"},"targhtid":[],"showmessageboolean":!1,"showmaeeagecontext":"","systemheight":"","resttime":"08:00,08:30,12:00,12:30,13:00,13:30,18:00,18:30,19:00,19:30,20:00,20:30,21:00","lockstate":!1,"functioncControlict":{},"scrolltitlex":0,"scrolltitley":0,"showrankmodel":!1,"contextscrolltitlex":0,"contextscrolltitley":0,"ischangetime":!1,"maintask":[],"showloginmodel":!1,"isinput":!1,"rangevalue":50,"timelong":{"min":10,"max":120,"step":5},"ranklong":{"min":1,"max":10,"step":.5},"textareasize":400,"inputfocus":!1,"primitivedata":"","random":0,"department":["-请选择-"],"mydepartment":"","showCalendar":!1,"selectdate":"","endtime":"2999/12/31"},e}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{"constructor":{"value":e,"enumerable":!1,"writable":!0,"configurable":!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(Index,o.Component),n(Index,[{"key":"componentWillMount","value":function componentWillMount(){console.log("载入init")}},{"key":"componentDidMount","value":function componentDidMount(){this.setState({"lockstate":i.default.getStorageSync("lockstate")})}},{"key":"componentWillUnmount","value":function componentWillUnmount(){}},{"key":"componentDidShow","value":function componentDidShow(){var e=this;console.log("载入show"),this.setState({"username":i.default.getStorageSync("username"),"phone":i.default.getStorageSync("phone"),"register":i.default.getStorageSync("register"),"mydepartment":i.default.getStorageSync("department")}),""===i.default.getStorageSync("phone")?this.setState({"showloginmodel":!0}):(this.pullmaintask(),this.pulldata()),setTimeout(function(){},700),i.default.request({"url":"https://xyx-mainland-api.raink.com.cn/v1/work/get-department"}).then(function(t){t.data.result.forEach(function(t){e.state.department.push(t.department)}),setTimeout(function(){var t="";e.state.department.forEach(function(e){t+="<option value='"+e+"'>"+e+"</option>"}),(0,c.default)("#department").after("<select class='select' id='departmentselect'>"+t+"</select>")},1e3)}).catch(function(){i.default.showToast({"title":"部门列表获取失败！","icon":"none"})})}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"flushhight","value":function flushhight(){var e=this.state.current;console.log("current"+e);var t=(0,c.default)("#hhhtab"+(parseInt(e+"")+1)+" > div");console.log(t);for(var a=0;a<t.length;a++){var l=(0,c.default)(t[a]).attr("id"),n=(0,c.default)("#work_content\\@\\@"+l).height();(0,c.default)("#length_time\\@\\@"+l).height(n),(0,c.default)("#work_project\\@\\@"+l).height(n),(0,c.default)("#work_start_time\\@\\@"+l).height(n),(0,c.default)("#work_efficiency\\@\\@"+l).height(n),(0,c.default)("#work_effect\\@\\@"+l).height(n),(0,c.default)("#work_myself\\@\\@"+l).height(n)}console.log("高度已经刷新了")}},{"key":"pullmaintask","value":function pullmaintask(){var e=this;i.default.request({"url":u.default.locality_address+"/v1/work/task","data":{"phone":i.default.getStorageSync("phone"),"scene":"web"}}).then(function(t){200==t.data.code?e.setState({"maintask":t.data.result}):i.default.showToast({"title":"主线任务加载失败，检查参数！","icon":"none"})}).catch(function(e){i.default.showToast({"title":"主线任务加载失败，检查网络！","icon":"none"})})}},{"key":"pulldata","value":function pulldata(){var e=this,t=void 0;i.default.request({"url":u.default.locality_address+"/v1/work/time"}).then(function(a){var l=new Date(1e3*parseInt(a.data.success_msg.time));return t=e.getWeek(l),e.setState({"currenttime":t,"currentdate":1e3*parseInt(a.data.success_msg.time)}),1e3*parseInt(a.data.success_msg.time)}).then(function(t){return e.setState({"current_today":e.timedaty_m_d(t),"onedayago":e.timedaty_m_d(t-864e5),"twodayago":e.timedaty_m_d(t-1728e5),"endtime":e.endtime(t)}),[e.timedaty_m_d(t),e.timedaty_m_d(t-864e5),e.timedaty_m_d(t-1728e5)]}).then(function(t){return i.default.request({"url":u.default.locality_address+"/v1/work/notes","data":{"phone":i.default.getStorageSync("phone"),"scene":"web","date":t[0]}}).then(function(t){console.log(t.data.success_msg.info),e.setState({"today_data":t.data.success_msg.info,"today_ext":t.data.success_msg.ext})}),t}).then(function(t){return i.default.request({"url":u.default.locality_address+"/v1/work/notes","data":{"phone":i.default.getStorageSync("phone"),"scene":"web","date":t[1]}}).then(function(t){e.setState({"onedayago_data":t.data.success_msg.info,"onedayago_ext":t.data.success_msg.ext})}),t}).then(function(t){return i.default.request({"url":u.default.locality_address+"/v1/work/notes","data":{"phone":i.default.getStorageSync("phone"),"scene":"web","date":t[2]}}).then(function(t){e.setState({"twodayago_data":t.data.success_msg.info,"twodayago_ext":t.data.success_msg.ext}),console.log(t.data.success_msg.info)}),t})}},{"key":"render","value":function render(){for(var e=this,t=[{"title":this.state.twodayago},{"title":this.state.onedayago},{"title":this.state.current_today}],a=(this.state.itemtitles,this.state.today_data),l=this.state.onedayago_data,n=this.state.twodayago_data,o=this.state.today_ext,i=this.state.onedayago_ext,c=this.state.twodayago_ext,u=[],m=5;m<=10;m+=.5)u.push(m);var f=a.map(function(t){return null==t.category&&(t.category=""),s.default.createElement(r.View,{"className":"tabletitle","id":t.id},s.default.createElement(r.View,{"id":"work_start_time@@"+t.id,"style":e.state.resttime.indexOf(t.work_start_time)>-1&&t.work_start_time.length>=5?"color:green":"none","className":"itemcontext itemcontexttime"},t.work_start_time),s.default.createElement(r.View,{"id":"length_time@@"+t.id,"className":"itemcontext"},s.default.createElement(r.Input,{"className":"itemcontextinput ","id":"length_time@@"+t.id+"@@input","onBlur":e.updateinput.bind(e,{"max":120,"min":10,"steap":5}),"value":t.length_time})),s.default.createElement(r.View,{"id":"category@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"category@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),e.state.categorys.map(function(e){return t.category!=e?s.default.createElement("option",{"value":e},e):t.category==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))),s.default.createElement(r.View,{"id":"work_project@@"+t.id,"className":"itemcontext itemcontext_long_project"},s.default.createElement(r.Textarea,{"className":"itemcontext_longinput_project textarea","id":"work_project@@"+t.id+"@@input","onBlur":e.updatetextarea.bind(e),"value":t.work_project})),s.default.createElement(r.View,{"id":"work_content@@"+t.id,"className":"itemcontext itemcontext_long"},s.default.createElement(r.Textarea,{"className":"itemcontext_longinput textarea","id":"work_content@@"+t.id+"@@input","onBlur":e.updatetextarea.bind(e),"value":t.work_content})),s.default.createElement(r.View,{"id":"work_efficiency@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_efficiency@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),u.map(function(e){return t.work_efficiency!=e?s.default.createElement("option",{"value":e},e):t.work_efficiency==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))),s.default.createElement(r.View,{"id":"work_effect@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_effect@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),e.state.maintask.map(function(e){return t.work_effect!=e.title?s.default.createElement("option",{"value":e.title},e.title):t.work_effect==e.title?s.default.createElement("option",{"value":e.title,"selected":!0},e.title):void 0}))),s.default.createElement(r.View,{"id":"work_myself@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_myself@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),u.map(function(e){return t.work_myself!=e?s.default.createElement("option",{"value":e},e):t.work_myself==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))))}),h=l.map(function(t){return s.default.createElement(r.View,{"className":"tabletitle","id":t.id},s.default.createElement(r.View,{"id":"work_start_time@@"+t.id,"style":e.state.resttime.indexOf(t.work_start_time)>-1&&t.work_start_time.length>=5?"color:green":"none","className":"itemcontext itemcontexttime"},t.work_start_time),s.default.createElement(r.View,{"id":"length_time@@"+t.id,"className":"itemcontext"},s.default.createElement(r.Input,{"className":"itemcontextinput ","id":"length_time@@"+t.id+"@@input","onBlur":e.updateinput.bind(e,{"max":120,"min":10,"steap":5}),"value":t.length_time})),s.default.createElement(r.View,{"id":"category@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"category@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),e.state.categorys.map(function(e){return t.category!=e?s.default.createElement("option",{"value":e},e):t.category==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))),s.default.createElement(r.View,{"id":"work_project@@"+t.id,"className":"itemcontext itemcontext_long_project"},s.default.createElement(r.Textarea,{"className":"itemcontext_longinput_project textarea","id":"work_project@@"+t.id+"@@input","onBlur":e.updatetextarea.bind(e),"value":t.work_project})),s.default.createElement(r.View,{"id":"work_content@@"+t.id,"className":"itemcontext itemcontext_long"},s.default.createElement(r.Textarea,{"className":"itemcontext_longinput textarea","id":"work_content@@"+t.id+"@@input","onBlur":e.updatetextarea.bind(e),"value":t.work_content})),s.default.createElement(r.View,{"id":"work_efficiency@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_efficiency@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),u.map(function(e){return t.work_efficiency!=e?s.default.createElement("option",{"value":e},e):t.work_efficiency==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))),s.default.createElement(r.View,{"id":"work_effect@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_effect@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),e.state.maintask.map(function(e){return t.work_effect!=e.title?s.default.createElement("option",{"value":e.title},e.title):t.work_effect==e.title?s.default.createElement("option",{"value":e.title,"selected":!0},e.title):void 0}))),s.default.createElement(r.View,{"id":"work_myself@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_myself@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),u.map(function(e){return t.work_myself!=e?s.default.createElement("option",{"value":e},e):t.work_myself==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))))}),g=n.map(function(t){return s.default.createElement(r.View,{"className":"tabletitle","id":t.id},s.default.createElement(r.View,{"id":"work_start_time@@"+t.id,"style":e.state.resttime.indexOf(t.work_start_time)>-1&&t.work_start_time.length>=5?"color:green":"none","className":"itemcontext itemcontexttime"},t.work_start_time),s.default.createElement(r.View,{"id":"length_time@@"+t.id,"className":"itemcontext"},s.default.createElement(r.Input,{"className":"itemcontextinput ","id":"length_time@@"+t.id+"@@input","onBlur":e.updateinput.bind(e,{"max":120,"min":10,"steap":5}),"value":t.length_time})),s.default.createElement(r.View,{"id":"category@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"category@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),e.state.categorys.map(function(e){return t.category!=e?s.default.createElement("option",{"value":e},e):t.category==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))),s.default.createElement(r.View,{"id":"work_project@@"+t.id,"className":"itemcontext itemcontext_long_project"},s.default.createElement(r.Textarea,{"className":"itemcontext_longinput_project textarea","id":"work_project@@"+t.id+"@@input","onBlur":e.updatetextarea.bind(e),"value":t.work_project})),s.default.createElement(r.View,{"id":"work_content@@"+t.id,"className":"itemcontext itemcontext_long"},s.default.createElement(r.Textarea,{"className":"itemcontext_longinput textarea","id":"work_content@@"+t.id+"@@input","onBlur":e.updatetextarea.bind(e),"value":t.work_content})),s.default.createElement(r.View,{"id":"work_efficiency@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_efficiency@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),u.map(function(e){return t.work_efficiency!=e?s.default.createElement("option",{"value":e},e):t.work_efficiency==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))),s.default.createElement(r.View,{"id":"work_effect@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_effect@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),e.state.maintask.map(function(e){return t.work_effect!=e.title?s.default.createElement("option",{"value":e.title},e.title):t.work_effect==e.title?s.default.createElement("option",{"value":e.title,"selected":!0},e.title):void 0}))),s.default.createElement(r.View,{"id":"work_myself@@"+t.id,"className":"itemcontext"},s.default.createElement("select",{"id":"work_myself@@"+t.id,"className":"select_item","name":"select_name","onChange":e.onCategoryChange},s.default.createElement("option",{"value":""},"---"),u.map(function(e){return t.work_myself!=e?s.default.createElement("option",{"value":e},e):t.work_myself==e?s.default.createElement("option",{"value":e,"selected":!0},e):void 0}))))}),p=s.default.createElement(r.View,{"className":"itemtitleplus","id":"ScrollView222"},s.default.createElement(r.View,{"className":"tabletitle"},s.default.createElement(r.View,{"className":"itemtitle itemtitletime"},"时间"),s.default.createElement(r.View,{"className":"itemtitle"},"时长(分)"),s.default.createElement(r.View,{"className":"itemtitle"},"类别"),s.default.createElement(r.View,{"className":"itemtitle itemtitle_long_project"},"工作项目"),s.default.createElement(r.View,{"className":"itemtitle itemtitle_long"},"工作内容及说明"),s.default.createElement(r.View,{"className":"itemtitle"},"效率自评"),s.default.createElement(r.View,{"className":"itemtitle"},"对应目标"),s.default.createElement(r.View,{"className":"itemtitle itemcontextright"},"驱动自评"))),y=s.default.createElement(r.View,{"className":"logcontext"},s.default.createElement(r.View,{"className":"table","id":"hhhtab3"},f)),w=s.default.createElement(r.View,{"className":"logcontext"},s.default.createElement(r.View,{"className":"table","id":"hhhtab2"},h)),_=s.default.createElement(r.View,{"className":"logcontext"},s.default.createElement(r.View,{"className":"table","id":"hhhtab1"},g)),v=this.state.maintask.map(function(e){return s.default.createElement(r.View,{"className":"maintaskitem"},s.default.createElement(r.Text,{"className":"tasktitle"},e.title),s.default.createElement(r.View,{"className":"taskcontext"},s.default.createElement(d.AtProgress,{"percent":parseInt(e.complete_time),"status":100==parseInt(e.complete_time)?"success":"progress"})))});return s.default.createElement(r.View,{"className":"index"},s.default.createElement(r.View,{"className":"icontitle"},s.default.createElement(r.Image,{"src":"https://cdn-xyx.raink.com.cn/elsfkxxk/201901051546668599.png","style":"height: 57px;width: 145px;margin: 5px  0 0 25px;"}),this.state.register.state&&s.default.createElement(d.AtButton,{"size":"small","className":"exit","onClick":this.exit.bind(this)},"退出")),this.state.register.state&&s.default.createElement(r.View,{"className":"title"},s.default.createElement(r.View,{"className":"userinfo"},this.state.register.state&&s.default.createElement(r.Text,null,this.state.mydepartment,"-"),s.default.createElement(r.Text,{"className":"username"},this.state.register.state?this.state.username:"欢迎")),s.default.createElement(r.Text,{"className":"currenttime"},this.state.currenttime),s.default.createElement(r.View,{"className":"task","onClick":this.tomaintask},s.default.createElement(r.Text,{"className":"text"},"主线任务"),s.default.createElement(d.AtIcon,{"className":"icon","value":"clock","size":"15","color":"#888"})),this.state.register.state&&s.default.createElement(d.AtButton,{"size":"small","type":"primary","className":"history","onClick":this.showhistory.bind(this),"customStyle":" margin: 0 0 0 0 ;"},"历史日志")),this.state.register.state&&s.default.createElement(r.View,{"className":"maintaskscroll","id":"ScrollViewtask"},this.state.maintask.length<=0&&s.default.createElement(r.View,{"className":"maintaskempty"},s.default.createElement(r.Text,null,"暂无任务")),this.state.maintask.length>0&&s.default.createElement(r.View,{"className":"maintask","onClick":this.tomaintask},v)),s.default.createElement(r.View,{"className":"contentplus"},s.default.createElement(r.View,{"className":"content"},this.state.register.state&&s.default.createElement(d.AtTabs,{"current":this.state.current,"tabList":t,"onClick":this.handleClick.bind(this),"swipeable":!1},s.default.createElement(d.AtTabsPane,{"current":this.state.current,"index":0,"className":"tabs"},s.default.createElement(r.View,{"className":"test1"},p,_),s.default.createElement(r.View,{"className":"bottom_self"},"今日工作要点自评:"),s.default.createElement(r.View,{"id":"daily_sum@@"+c.id,"className":"bottom_value"},s.default.createElement(r.Textarea,{"className":"bottom_value_input","id":"daily_sum@@"+c.id+"@@input","onBlur":this.updatetextarea_ext.bind(this),"value":c.daily_sum}))),s.default.createElement(d.AtTabsPane,{"current":this.state.current,"index":1},s.default.createElement(r.View,{"className":"test1"},p,w),s.default.createElement(r.View,{"className":"bottom_self"},"今日工作要点自评:"),s.default.createElement(r.View,{"id":"daily_sum@@"+i.id,"className":"bottom_value"},s.default.createElement(r.Textarea,{"className":"bottom_value_input","id":"daily_sum@@"+i.id+"@@input","onBlur":this.updatetextarea_ext.bind(this),"value":i.daily_sum}))),s.default.createElement(d.AtTabsPane,{"current":this.state.current,"index":2},s.default.createElement(r.View,{"className":"test1"},p,y),s.default.createElement(r.View,{"className":"bottom_self"},"今日工作要点自评:"),s.default.createElement(r.View,{"id":"daily_sum@@"+o.id,"className":"bottom_value"},s.default.createElement(r.Textarea,{"className":"bottom_value_input","id":"daily_sum@@"+o.id+"@@input","onBlur":this.updatetextarea_ext.bind(this),"value":o.daily_sum})))))),s.default.createElement(d.AtModal,{"isOpened":this.state.showloginmodel,"closeOnClickOverlay":!1,"onClose":this.closeloginModal.bind(this,1,"点击了确定")},s.default.createElement(d.AtModalHeader,null,"登录"),s.default.createElement(d.AtModalContent,null,s.default.createElement(r.View,{"className":"delmode"},s.default.createElement(r.View,{"className":"department"},s.default.createElement(r.Text,{"id":"department"},"部门:")),s.default.createElement(r.View,{"className":"formstyle"},s.default.createElement(d.AtInput,{"name":"value","type":"text","placeholder":"请输入姓名","value":this.state.username,"onChange":this.nameChange.bind(this),"customStyle":"padding:15rpx 0"}),s.default.createElement(d.AtInput,{"name":"value","type":"text","placeholder":"请输入手机号码","value":this.state.phone,"onChange":this.changePhone.bind(this),"customStyle":"padding:15rpx 0"})))),s.default.createElement(d.AtModalAction,null,s.default.createElement(r.Button,{"style":"color:#6190E8","onClick":this.login.bind(this,1,"点击了登录")},"确定"))),s.default.createElement(d.AtModal,{"isOpened":this.state.showCalendar,"onClose":this.closeloginModal.bind(this,1,"点击了确定"),"className":"model"},s.default.createElement(d.AtModalHeader,null,"历史日志"),s.default.createElement(d.AtModalContent,null,s.default.createElement(r.View,{"className":"delmode"},s.default.createElement(d.AtCalendar,{"format":"YYYY-MM-DD","minDate":"2018/1/1","maxDate":this.state.endtime,"onDayClick":this.datechange.bind(this)}))),s.default.createElement(d.AtModalAction,null,s.default.createElement(r.Button,{"onClick":this.closeCalendar.bind(this,1,"点击了取消")},"取消"),s.default.createElement(r.Button,{"style":"color:#6190E8","onClick":this.gohistory.bind(this,1,"点击了登录")},"确定"))))}},{"key":"datechange","value":function datechange(e){console.log(e),this.setState({"selectdate":e.value})}},{"key":"gohistory","value":function gohistory(){i.default.navigateTo({"url":"/pages/history/history?date="+this.state.selectdate+"&today="+this.state.current_today}),this.closeCalendar()}},{"key":"closeCalendar","value":function closeCalendar(){this.setState({"showCalendar":!1})}},{"key":"showhistory","value":function showhistory(e){this.setState({"showCalendar":!0})}},{"key":"exit","value":function exit(e){i.default.removeStorageSync("lockstate"),i.default.removeStorageSync("locktaskstate"),i.default.removeStorageSync("phone"),i.default.removeStorageSync("register"),i.default.removeStorageSync("sysinfo"),i.default.removeStorageSync("taroRouterStore"),i.default.removeStorageSync("username"),location.reload()}},{"key":"changerange","value":function changerange(e){m=e.detail.value,this.setState({"value":m})}},{"key":"updateinput","value":function updateinput(e,t){var a=this;console.log(t);var l=t.target.id.split("@@");if(console.log(l),console.log(parseFloat(t.detail.value)),console.log(e.min),console.log(e.max),console.log(e.steap),console.log(parseFloat(t.detail.value)%parseFloat(e.steap)),""!=t.detail.value&&(console.log("进来了1"),parseFloat(t.detail.value)<e.min||parseFloat(t.detail.value)>e.max||parseFloat(t.detail.value)%parseFloat(e.steap)!=0))return console.log("进来了2"),i.default.showToast({"title":"当前格位范围为:"+e.min+"-"+e.max+" 步进为:"+e.steap+"请检查内容","icon":"none","duration":2e3}),void this.setState({"random":Math.random()});i.default.request({"url":u.default.locality_address+"/v1/work/modify","data":{"wid":l[1],"phone":i.default.getStorageSync("phone"),"scene":"web","field":l[0],"val":t.detail.value},"method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){switch(a.state.current){case 0:for(var t=a.state.twodayago_data,l=0;l<t.length;l++)t[l].id==e.data.result.wid&&(t[l][e.data.result.field]=e.data.result.val);break;case 1:for(var n=a.state.onedayago_data,o=0;o<n.length;o++)n[o].id==e.data.result.wid&&(n[o][e.data.result.field]=e.data.result.val);break;case 2:for(var i=a.state.today_data,s=0;s<i.length;s++)i[s].id==e.data.result.wid&&(i[s][e.data.result.field]=e.data.result.val)}})}},{"key":"onCategoryChange","value":function onCategoryChange(e){var t=this,a=e.target.id.split("@@");console.log(a),i.default.request({"url":u.default.locality_address+"/v1/work/modify","data":{"wid":a[1],"phone":i.default.getStorageSync("phone"),"scene":"web","field":a[0],"val":e.target.value},"method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){switch(t.state.current){case 0:for(var a=t.state.twodayago_data,l=0;l<a.length;l++)a[l].id==e.data.result.wid&&(a[l][e.data.result.field]=e.data.result.val);break;case 1:for(var n=t.state.onedayago_data,o=0;o<n.length;o++)n[o].id==e.data.result.wid&&(n[o][e.data.result.field]=e.data.result.val);break;case 2:for(var i=t.state.today_data,s=0;s<i.length;s++)i[s].id==e.data.result.wid&&(i[s][e.data.result.field]=e.data.result.val)}})}},{"key":"updatetextarea","value":function updatetextarea(e){var t=this;console.log(e);var a=e.target.id.split("@@");console.log(a),i.default.request({"url":u.default.locality_address+"/v1/work/modify","data":{"wid":a[1],"phone":i.default.getStorageSync("phone"),"scene":"web","field":a[0],"val":e.target.value},"method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){switch(t.state.current){case 0:for(var a=t.state.twodayago_data,l=0;l<a.length;l++)a[l].id==e.data.result.wid&&(a[l][e.data.result.field]=e.data.result.val);break;case 1:for(var n=t.state.onedayago_data,o=0;o<n.length;o++)n[o].id==e.data.result.wid&&(n[o][e.data.result.field]=e.data.result.val);break;case 2:for(var i=t.state.today_data,s=0;s<i.length;s++)i[s].id==e.data.result.wid&&(i[s][e.data.result.field]=e.data.result.val)}})}},{"key":"updatetextarea_ext","value":function updatetextarea_ext(e){var t=this;console.log(e);var a=e.target.id.split("@@");console.log(a),i.default.request({"url":u.default.locality_address+"/v1/work/modify","data":{"wid":a[1],"phone":i.default.getStorageSync("phone"),"scene":"web","field":a[0],"val":e.target.value},"method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){switch(t.state.current){case 0:t.state.twodayago_ext.daily_sum=e.data.result.val;break;case 1:t.state.onedayago_ext.daily_sum=e.data.result.val;break;case 2:t.state.today_ext.daily_sum=e.data.result.val}})}},{"key":"login","value":function login(){var e=this;if(this.state.username.length>7||this.state.username.length<=0)i.default.showToast({"title":"名字长度应在1-7字","icon":"none"});else{if(!/(?:^1[3456789]|^9[28])\d{9}$/.test(this.state.phone))return void i.default.showToast({"title":"手机号格式不正确","icon":"none"});if("-请选择-"==(0,c.default)("#departmentselect").val())return void i.default.showToast({"title":"请选择部门!","icon":"none"});i.default.request({"url":u.default.locality_address+"/v1/work/phone-login","data":{"username":this.state.username,"phone":this.state.phone,"scene":"web","department":(0,c.default)("#departmentselect").val()},"method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){200==t.data.code?(i.default.setStorageSync("username",e.state.username),i.default.setStorageSync("phone",e.state.phone),i.default.setStorageSync("register",{"msg":"success","state":!0}),i.default.setStorageSync("department",(0,c.default)("#departmentselect").val()),e.setState({"register":{"msg":"success","state":!0},"mydepartment":(0,c.default)("#departmentselect").val()}),i.default.showLoading({"title":"请稍后","mask":!0}),setTimeout(function(){i.default.hideLoading(),e.setState({"showloginmodel":!1}),e.pullmaintask(),e.pulldata()},1e3)):i.default.showToast({"title":"网络出错！","icon":"none"})}).catch(function(e){i.default.showToast({"title":"网络出错！","icon":"none"})})}}},{"key":"closeloginModal","value":function closeloginModal(){}},{"key":"nameChange","value":function nameChange(e){this.setState({"username":e})}},{"key":"changePhone","value":function changePhone(e){this.setState({"phone":e})}},{"key":"tomaintask","value":function tomaintask(e){i.default.navigateTo({"url":"/pages/maintask/maintask"})}},{"key":"showmessage","value":function showmessage(e){console.log("断案");var t=e.currentTarget.id.split("@@");console.log(t),this.setState({"targhtid":t,"modeldatatitle":this.state.idMname[t[0]]});var a="";switch(this.state.current){case 0:console.log("进入10");for(var l=this.state.twodayago_data,n=0;n<l.length;n++)l[n].id==t[1]&&(a=l[n][t[0]]);break;case 1:console.log("进入2");for(var o=this.state.onedayago_data,i=0;i<o.length;i++)o[i].id==t[1]&&(a=o[i][t[0]]);break;case 2:console.log("进入3");for(var s=this.state.today_data,r=0;r<s.length;r++)s[r].id==t[1]&&(a=s[r][t[0]])}this.setState({"showmessageboolean":!0,"showmaeeagecontext":a})}},{"key":"changelockstate","value":function changelockstate(){this.setState({"lockstate":!this.state.lockstate}),i.default.setStorageSync("lockstate",!this.state.lockstate)}},{"key":"closepicker","value":function closepicker(){}},{"key":"closeshowModal","value":function closeshowModal(){this.setState({"showmessageboolean":!1,"showmaeeagecontext":"","targhtid":[],"modeldatatitle":"标题"})}},{"key":"handleClick","value":function handleClick(e){console.log(e),this.setState({"current":e,"scrolltitlex":0,"scrolltitley":0,"contextscrolltitley":0,"contextscrolltitlex":0}),clearTimeout(void 0),clearTimeout(void 0),clearTimeout(void 0),setTimeout(function(){},700)}},{"key":"handleChangeinput","value":function handleChangeinput(e){console.log(e),this.setState({"value":e})}},{"key":"handleChange","value":function handleChange(e){console.log(e),this.setState({"value":e.nativeEvent.target.value})}},{"key":"changemessage","value":function changemessage(e,t){console.log(t),console.log("长按");var a=t.currentTarget.id.split("@@");this.setState({"showmodel":!0,"targhtid":a,"modeldatatitle":this.state.idMname[a[0]],"textareasize":e});var l="";switch(this.state.current){case 0:console.log("进入10");for(var n=this.state.twodayago_data,o=0;o<n.length;o++)n[o].id==a[1]&&(l=n[o][a[0]]);break;case 1:console.log("进入2");for(var i=this.state.onedayago_data,s=0;s<i.length;s++)i[s].id==a[1]&&(l=i[s][a[0]]);break;case 2:console.log("进入3");for(var r=this.state.today_data,d=0;d<r.length;d++)r[d].id==a[1]&&(l=r[d][a[0]])}this.setState({"value":l})}},{"key":"updatemessage","value":function updatemessage(e){var t=this;console.log(e),i.default.request({"url":u.default.locality_address+"/v1/work/modify","data":{"wid":this.state.targhtid[1],"phone":i.default.getStorageSync("phone"),"scene":"web","field":this.state.targhtid[0],"val":this.state.value},"method":"POST","header":{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){switch(t.state.current){case 0:for(var a=t.state.twodayago_data,l=0;l<a.length;l++)a[l].id==t.state.targhtid[1]&&(console.log("1111"+a[l][t.state.targhtid[0]]),a[l][t.state.targhtid[0]]=t.state.value);break;case 1:for(var n=t.state.onedayago_data,o=0;o<n.length;o++)n[o].id==t.state.targhtid[1]&&(console.log("1111"+n[o][t.state.targhtid[0]]),n[o][t.state.targhtid[0]]=t.state.value);break;case 2:for(var i=t.state.today_data,s=0;s<i.length;s++)i[s].id==t.state.targhtid[1]&&(console.log("1111"+i[s][t.state.targhtid[0]]),i[s][t.state.targhtid[0]]=t.state.value)}t.setState({"showmodel":!1,"targhtid":[],"modeldatatitle":"标题","value":"","showrankmodel":!1}),setTimeout(function(){},700)})}},{"key":"changerank","value":function changerank(e){this.setState({"value":e.value})}},{"key":"showrankmodel","value":function showrankmodel(e){if(console.log(e),console.log(e.currentTarget.dataset.text),console.log("长按"),console.log(this.state),!this.state.lockstate){var t=e.currentTarget.id.split("@@"),a="";switch("work_efficiency"==t[0]||"work_effect"==t[0]||"work_myself"==t[0]?(0,c.default)("#range1").attr(this.state.ranklong):"length_time"==t[0]&&(0,c.default)("#range1").attr(this.state.timelong),this.state.current){case 0:console.log("进入10");for(var n=this.state.twodayago_data,o=0;o<n.length;o++)n[o].id==t[1]&&(a=n[o][t[0]]);break;case 1:console.log("进入2");for(var i=this.state.onedayago_data,s=0;s<i.length;s++)i[s].id==t[1]&&(a=i[s][t[0]]);break;case 2:console.log("进入3");for(var r=this.state.today_data,d=0;d<r.length;d++)r[d].id==t[1]&&(a=r[d][t[0]])}console.log(void 0===a?"undefined":l(a)),"length_time"==t[0]?this.setState({"ischangetime":!0,"value":""!==a&&a?a:"10"}):this.setState({"value":""!==a&&a?a:"1"}),this.setState({"showrankmodel":!0,"targhtid":t,"modeldatatitle":this.state.idMname[t[0]]})}}},{"key":"getWeek","value":function getWeek(e){var t=void 0;return 0==e.getDay()&&(t="星期日"),1==e.getDay()&&(t="星期一"),2==e.getDay()&&(t="星期二"),3==e.getDay()&&(t="星期三"),4==e.getDay()&&(t="星期四"),5==e.getDay()&&(t="星期五"),6==e.getDay()&&(t="星期六"),t}},{"key":"timedat","value":function timedat(e){var t=new Date(e);t.getFullYear();return t.getMonth()+1+"月"+t.getDate()+"日"}},{"key":"timedaty_m_d","value":function timedaty_m_d(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1;l<10&&(l="0"+l);var n=t.getDate();return n<10&&(n="0"+n),a+"-"+l+"-"+n}},{"key":"endtime","value":function endtime(e){var t=new Date(e),a=t.getFullYear(),l=t.getMonth()+1;l<10&&(l="0"+l);var n=t.getDate();return n<10&&(n="0"+n),a+"/"+l+"/"+n}},{"key":"goregister","value":function goregister(){i.default.navigateTo({"url":"/pages/bindname/bindname"})}}]),Index}();t.default=f}}]);